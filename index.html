<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>PONG 3D</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="style.css" />
    <script src="formas.js" defer></script>
    <script  id="vertex-shader" type="notjs">
        precision mediump float;

        attribute vec3 aPosition;
        attribute vec3 aNormal;

        varying vec3 vNormal;
        varying vec3 vSurfaceToLight;
        varying vec3 vSurfaceToView;
        
        uniform mat4 uModelMatrix;
        uniform mat4 uInverseTransposeModelMatrix;
        uniform mat4 uViewMatrix;
        uniform mat4 uProjectionMatrix;

        uniform mat4 uModelViewingProjectionMatrix;
        uniform vec3 uLightPosition;
        uniform vec3 uViewPosition;
        
        void main() {
            vNormal = mat3(uInverseTransposeModelMatrix) * aNormal;
            vec3 surfacePosition = (uModelMatrix * vec4(aPosition, 1)).xyz;
            vSurfaceToLight = uLightPosition - surfacePosition;
            vSurfaceToView = uViewPosition - surfacePosition;
            gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(aPosition, 1);
        }
    </script>
    <script  id="fragment-shader" type="notjs">
        precision mediump float;

        varying vec3 vNormal;
        varying vec3 vSurfaceToLight;
        varying vec3 vSurfaceToView;

        uniform vec3 uAmbientReflection;
        uniform vec3 uDiffuseReflection;
        uniform vec3 uSpecularReflection;

        uniform float uShininess;
        
        void main() {
            gl_FragColor = vec4(uDiffuseReflection, 1);

            vec3 normal = normalize(vNormal);
            vec3 surfaceToLightDirection = normalize(vSurfaceToLight);
            vec3 surfaceToViewDirection = normalize(vSurfaceToView);
            vec3 halfVector = normalize(surfaceToLightDirection + surfaceToViewDirection);

            float light = dot(surfaceToLightDirection,normal);
            float specular = 0.0;
            if (light > 0.0) {
              specular = pow(dot(normal, halfVector), uShininess);
            }

            gl_FragColor.rgb = 0.4*uAmbientReflection + 0.6*light*uDiffuseReflection;
            gl_FragColor.rgb += specular*uSpecularReflection;
        }
    </script>
    
</head>
<body>
  <div align="center"> 
    <h2 style="color: rgb(67, 5, 93); margin-bottom: 0;">PONG 3D</h2>
    <div style="display:flex; justify-content: center; align-items: center;">
        <div>
            <h4>
                Jogador 1
            </h4>
            <p>
                Controle: W e S
            </p>
        </div>
        <div style="margin-left: 2rem;">
            <h4>
                Jogador 2
            </h4>
            <p>
                Controle: ↑ e ↓
            </p>
        </div>
    </div>
    <div style="display:flex; justify-content: center; align-items: center; color: rgb(237, 193, 254); background-color:  rgb(101, 55, 121); width: 150px;height: 40px; border-radius: 1rem;">
            <h4>
                <span id="p1">0</span> x
            </h4>
            <h4 style="margin-left: 10px;">
                <span id="p2">0</span>
            </h4>
    </div>

    <div style="display:flex; justify-content: center; align-items: center;">
    <div>
        <h4>
            Controles da Câmera
        </h4>
        <p>
            a - rotação antihorária<br>
            h - rotação horária<br>
            c - aproximar a câmera<br>
            f - afastar a câmera<br>
            u - subir a câmera<br>
            d - abaixar a câmera<br>
        </p>
    </div>
</div>


    <p><canvas id="canvas" width="500" height="500"></canvas></p>

    <button id="reload" style="background-color:  rgb(101, 55, 121); color: rgb(237, 193, 254); width: 150px;height: 40px; border-radius: 1rem;">
        Reiniciar Jogo
    </button>

  </div>
</body>
</html>
